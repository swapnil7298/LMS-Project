{% extends "base.html" %}

{% block title %}Start a New Conversation{% endblock %}

{% block content %}
<section class="page-section">
    <div class="container">
        <div class="page-header">
            <h1>Start a New Message</h1>
            <a href="{{ url_for('messages') }}" class="btn btn-secondary">Cancel</a>
        </div>

        <div class="form-container-card">
            <form action="{{ url_for('new_message') }}" method="POST">
                <div class="form-group">
                    <label for="recipient">Select a User to Message:</label>
                    <select name="recipient_id" id="recipient" class="role-select" style="width: 100%; padding: 0.7rem;">
                        {% for user in users %}
                            <option value="{{ user._id }}">{{ user.username }} ({{ user.role }})</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="message_body">Your Message</label>
                    <textarea id="message_body" name="message_body" rows="4" placeholder="Type your message here..." required></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Send Message</button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}